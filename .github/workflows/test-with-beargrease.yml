name: Test with Beargrease

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    timeout-minutes: 20

    steps:
      - name: ğŸ“¥ Checkout Placebo code
        uses: actions/checkout@v3

      - name: ğŸ“‚ Prepare wallet volume mount
        run: mkdir -p .wallet-volume

      - name: ğŸ§¶ Install JavaScript Dependencies
        run: |
          echo "Installing JS dependencies..."
          yarn install

      - name: ğŸ» Run Beargrease
        uses: rgmelvin/beargrease-by-cabrillo@v1.0.18
        with:
          wallet-secret: ${{ secrets.TEST_USER_KEYPAIR_B64 }}